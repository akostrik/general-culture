## Virtual Private Network, VPN
* VPN прячет все ваши действия в Интернете от чужих глаз, ни сайты, ни организации не смогут следить за тем, чем вы занимаетесь в сети
* позволяют заходить на стриминговые сайты, заблокированные в вашей стране
* скачивать торренты
* шифровать соединение при работе через публичный WiFi
* ExpressVPN - лучший, высокие скорости, конфиденциальность, шифрование
* NordVPN - Лучший VPN для MAC, разблокирует все основные потоковые сервисы
* Surfshark - Самый дешевый из лучших VPN
  + $1,94 в месяц вы получаете отличную разблокировку Netflix плюс 1700 серверов в 63 странах
* Private Internet Access - Лучший по версии Reddit, сверхзащищенный, шифрование, конфиденциальность
* PrivateVPN - недорогой, доступ к потоковым сервисам

### методика борьбы с VPN на основе Shadowsocks (блокировки Outline)
* это не DPI, какая-то хрень на т.н. "ТСПУ"
  + сами по себе пакеты не анализируются
  + поиск характерной сигнатуры не производится
  + пакет Shadowsocks не имеет однозначно определяемой сигнатуры
    - что является одновременно и его сильной стороной, и слабой
* Есть признаки развертывания инфраструктуры Active Probing
  + https://ensa.fi/active-probing/
  + позволяет выявлять и блокировать серверы, использующие этот протокол (в первую очередь стандартный Outline)
  + обнаруженные таким серверы могут быть заблокированы целиком и навсегда, и смена протокола не поможет
  + Замечены в этом мобильные операторы МТС и Мегафон
  + Билайн пытается ловить Shadowsocks VPN ориентируясь на размеры (но не содержание) пакетов в процедуре установления соединения с сервером

## Web
* Смена локального домена: сменить алиас нашего локального домена (127.0.0.1) на something.42.fr
  + `/etc/hosts`

## HTTP = HyperText Transfer Protocol
* сетевой протокол прикладного уровня
* протокол уровня приложений для распределённых, объединённых, гипермедийных информационных систем
* изначально предназначался для получения с серверов гипертекстовых документов в формате HTML
* стал универсальным средством взаимодействия между узлами Всемирной паутины и изолированных веб-инфраструктур

## Network Interface Controller = NIC = сетевой адаптер = сетевая карта = сетевая плата = Ethernet-адаптер
* соединяет компьютер с сетью (локальной, интернетом, интранетом) и обмен данными между устройствами
* функция:
  + получение данных из сетевого кабеля и перевод в формат, который может распознать процессор компьютера
  + отправка данных с ПК к сетевому кабелю
  + кодирование и декодирование данных при передаче по сети
  + передача данных между компьютерами и устройствами внутри сети
* компоненты:
  + контроллер, функция микропроцессора и обрабатывает данные
  + порт, к которому подключается кабель Ethernet
  + разъем ROM для подключения рабочих станций к сети
  + антенна, усиливающая сигнал при беспроводном соединении с сетью
* модели
  + физические внешние
  + физические встроенные
  + виртуальные
    - это не устройство, а интерфейс
    - работает на базе приложения или программного обеспечения в ОС
    - только в виртуальных средах
    - «Выйти в интернет» без физической сетевой карты не получится
    - для взаимодействия между виртуальными машинами и для получения дополнительных сетевых интерфейсов
* исходя из поколения шины:
  + ISA, 1981 г., небольшая скорость передачи
  + PCI, 1990 г., устраели
  + PCI-X, модернизированная вариация PCI, используется для серверов
  + PCIe, новейший стандарт, применяется на ПК и серверах
  + USB, стандарт внешней шины, подходит для подсоединения к Wi-Fi
*  по типу портов:
  + оптический с оптоволоконным кабелем
  + AUI с толстым коаксиальным кабелем
  + BNC с тонким коаксиальным кабелем
  + RJ-45 с кабелем витой пар

## NAT = Network Address Translation = IP Masquerading, Network Masquerading и Native Address Translation.
* механизм в сетях TCP/IP
* преобразовывает IP-адреса транзитных пакетов
* преобразование адреса может производиться маршрутизирующим устройством (маршрутизатором, сервером доступа, межсетевым экраном)
* наиболее популярным является SNAT
  + замена адреса источника при прохождении пакета в одну сторону и обратной замене адреса назначения в ответном пакете
*  роутер принимает пакет от локального компьютера
  + если IP-адрес назначения локальный адрес, то пакет пересылается другому локальному компьютеру
  + если нет, то пакет надо переслать наружу в интернет
    - обратным адресом в пакете указан локальный адрес компьютера, который из интернета будет недоступен
    - роутер «на лету» транслирует (подменяет) обратный IP-адрес пакета на свой внешний (видимый из интернета) IP-адрес и меняет номер порта (чтобы различать ответные пакеты, адресованные разным локальным компьютерам)
    - комбинацию, нужную для обратной подстановки, роутер сохраняет у себя во временной таблице
* позволяет сэкономить IP-адреса
  + транслирует несколько внутренних IP-адресов в один внешний публичный IP-адрес
  + по такому принципу построено большинство сетей в мире: на небольшой район домашней сети местного провайдера или на офис выделяется 1 публичный (внешний) IP-адрес, за которым работают и получают доступ интерфейсы с приватными (внутренними) IP-адресами
* позволяет предотвратить или ограничить обращение снаружи ко внутренним хостам, оставляя возможность обращения изнутри наружу
  + при инициации соединения изнутри сети создаётся трансляция
  + ответные пакеты, поступающие снаружи, соответствуют созданной трансляции и поэтому пропускаются
  + если для пакетов, поступающих снаружи, соответствующей трансляции не существует, они не пропускаются
* позволяет скрыть внутренние сервисы внутренних хостов/серверов
  + это та же трансляция на определённый порт
  + но возможно подменить внутренний порт официально зарегистрированной службы (например, 80-й порт TCP (HTTP-сервер) на внешний 54055-й)
  + снаружи, на внешнем IP-адресе после трансляции адресов на сайт (или форум) для осведомлённых посетителей можно будет попасть по адресу http://example.org:54055, но на внутреннем сервере, находящемся за NAT, он будет работать на 80-м порту
* source NAT = предоставления пользователям локальной сети с внутренними адресами доступа к сети Интернет
* destination NAT = обращения извне транслируются межсетевым экраном на компьютер пользователя в локальной сети, имеющий внутренний адрес и потому недоступный извне сети без NAT

##  DNS server (Domain Name System)
* распределённая система для получения информации о доменах
* для соединения с узлом необходима информация о его IP-адресе, а для людей проще запоминать буквенные адреса
* для получения IP-адреса по имени компьютера
* для получения информации о маршрутизации почты и/или обслуживающих узлах для протоколов в домене (SRV-запись)
* первоначально преобразование между доменными и IP-адресами производилось с использованием текстового файла hosts, который составлялся централизованно и автоматически рассылался на каждую из машин в своей локальной сети, но с ростом сети возникла необходимость в автоматизированном механизме
* поддерживается с помощью иерархии DNS-серверов, взаимодействующих по определённому протоколу
* используется представление об иерархической структуре имени и зон
  + каждый сервер, отвечающий за имя, может передать ответственность за дальнейшую часть домена другому серверу (другой организации или человеку) => ответственность за актуальность информации на серверах различных организаций, отвечающих только за «свою» часть доменного имени транспортного и прикладного уровней
* Дополнительные возможности
  + поддержка динамических обновлений
  + средства проверки целостности передаваемых данных DNS Security Extensions (DNSSEC)
    - передаваемые данные не шифруются
    - достоверность проверяется криптографическими способами
    - обеспечивает передачу средствами DNS достоверной криптографической информации (сертификатов), используемых для установления безопасных и защищённых соединений   
  + защита транзакций (TSIG)
  + поддержка различных типов информации
* в браузере `8.8.8.8`
* **DNS resolver** translates human-friendly domain names into the numeric IP addresses
  + **`etc/resolv.conf`** = its config
```
                              # when no domain suffix is supplied -> the given query name + search domains = a fully qualified domain 
search example.com local.test # tries additionally somehost.example.com and somehost.local.test
                              # a list of IP addresses of nameservers for resolution:
nameserver 10.0.0.17          # the resolver to query for the name server with IP 10.0.0.17
nameserver 10.1.0.12          # is only used when the first or last used server is unavailable
nameserver 10.16.0.7
```

## Ports
* порт = логический объект
  + является конечной точкой связи в сетевых соединениях
  + связан с процессом или службой
  + способен находиться в одном из четырех возможных состояний:
    - открытом
    - закрытом
    - filtered
    - unfiltered
  + если порт открыт, то программное обеспечение целевого оборудования прослушивает его соединения и пакеты
* `telnet loclhost 80` verify
* `sudo netstat -ltupan` (именно c sudo)
  + l прослушивающиеся сокеты (сочетания IP-адреса и номера порта)
  + n номера портов вместо названий служб
  + t показать TCP-соединения
  + u показать UDP-соединения
  + a только активные соединения
* `netstat -ntlp | grep LISTEN` список прослушиваемых портов (network statistic)
* `ss -lntu`
  + ss = современная альтернатива для netstat (socket statistics)
  + l все прослушивающиеся сокеты
  + n  номера портов вместо названий служб
  + t показать TCP-соединения
  + u показать UDP-соединения
* `nmap localhost`
  + проверка открытых портов на удаленных хостах
  + проверка нашей системы
* `sudo nmap -sT -sU -sV 159.89.108.187`
  + sT показать TCP-соединения
  + sU показать UDP-соединения
  + sV обнаружение версий программного обеспечения
* `lsof -i` открытые соединения (list of open files)
* `lsof -nP -i` доступные соединения
* `lsof -i :80` процессы, работающих с портом 80
* `lsof -nP -i | grep LISTEN` список прослушиваемых портов
* `ss -ltupn` почти как netstat
* `iptables -L` правила брандмауэра iptables - понять, какие порты закрыты с его помощью
* `ip addr show` network interfaces
* открытый порт сам по себе не представляет опасности
  + может стать угрозой безопасности ОС, как только его начнет использовать программа
* 22 SSH
* 53 DNS  
* 80 HTTP  
* 443 HTTPS  
* 3306 MySQL  

## API (Application programming interface, интерфейс прикладной программы)
* инструмент для взаимодействия, интерфейс для программы, который общается с ней на понятном языке
  + по аналогии, кнопка — пользовательский интерфейс
* набор правил, которые позволяют программам взаимодействовать 
* API может быть:
  + у языка программирования
    - чтобы функции взаимодействовали между собой
    - каждая функция выступает «приложением»
    - API = набором инструкций для правильного вызова этих функций
  + у ОС
    - чтобы программы могли извлекать из неё данные и изменять настройки ОС
    - при разработке приложения для Windows, Linux или Android нужно знать API этой системы, чтобы работать с файлами и графикой
  + у веб-сервисов
    - чтобы другие веб-сервисы и программы могли к ним подключаться и работать совместно
    - при разработке программ и веб-сервисов часто нужно обращаться в сторонние сервисы
    - веб-разработчики чаще всего сталкиваются именно с веб-API
* **RESTful API** = тип API, который следует принципам архитектуры передачи репрезентативного состояния
  + сам по себе веб-API можно составить как угодно
  + для удобства разработчиков существует REST API — определённый набор стандартов по составлению API с помощью протокола HTTP
    - позволяет унифицировать программные интерфейсы, сделать их понятными
* OpenAPI
  + спецификация
  + формализует написание API и позволяет автоматически генерировать API и интеграции для работы с большим количеством сторонних приложений
  + когда мы берём сторонний веб-API, его нужно интегрировать в нашу программу => OpenAPI автоматизирует 
* протокол gRCP
  + в основном сейчас для обмена запросами по веб-API используют XML/JSON поверх протокола HTTP 1.1.
  + проблема: она требует чётко фиксированных запросов, которые не очень удобно прописывать в коде
  + кроме того, запросы XML/JSON достаточно тяжёлые и нагружают сеть
* протокол gRCP (?) решает эти прблемы
  + обмениваться более лёгкими запросами
  + составлять для обмена более простые API
  + пока не стал стандартом
  + можно использовать, если подключить специальные библиотеки
* пользоваться API:
  + сторонний разработчик пишет приложение, функцию, операционную систему
  + он составляет API — набор правил, на основе которых другие разработчики могут использовать его разработку
  + API либо лежит в публичном доступе, либо открывается по запросу для клиентов
  + вы вызываете API внутри своего приложения и пользуетесь нужными функциями
  + вам не нужно знать, как работает API-функция, вы будете вызывать её всего одной и получать нужный результат
* создать API
  + составить набор инструкций, по которым другие приложения смогут обращаться к вашему
* используется, например, чтобы получить информацию, отправить её, изменить, удалить, например:
  + отправка вам курса валют
  + авторизация вас в CRM-системе с возможностью добавлять, удалять и изменять информацию
  + проведение платежа через банковскую систему
  + распознавание голоса и перевод его в текст
  + перевод текста
  + получение информации об актуальных остатках товара
* Ваше приложение отправляет запрос, API формирует ответ 
* позволяет не разрабатывать свои функции, а пользоваться уже разработанными
  + как с библиотеками: вы можете не писать свою функцию сортировки, а подключить библиотеку 
  + например, у вас есть внутренняя CRM-система и вы хотите добавить к ней учёт рабочего времени, можно найти сервис учёта, взять его API и подключить к своей CRM
  + использование API делает приложение безопаснее. Если ваша компания не специализируется на информационной безопасности, вам сложно будет создать безопасный инструмент для платежей или схему авторизации, а разработчики API как раз заняты в первую очередь безопасностью
* вызов API обычно прописан в документации к нему
  + как правило, для вызова нужно отправить данные на сервер, адрес которого задан в виде URL
  + Например, добавить к себе на сайт Яндекс Карту
    - подключаете карту в заголовок вашей страницы `<script src="https://api-maps.yandex.ru/2.1/?apikey=ваш API-ключ&lang=ru_RU" type="text/javascript"></script>`
    - API-ключ нужно получать отдельно, так как API Яндекс Карт закрытый
    - создаёте контейнер, в котором будет карта `<div id="map" style="width: 600px; height: 400px"></div>`
    - добавляете код карты
```
<script type="text/javascript">
  ymaps.ready(init);
  function init() { var myMap = new ymaps.Map("map", {center: [55.76, 37.64], zoom: 7}); }
</script>
```

## CGI = Common Gateway Interface
* спецификация интерфейса
* для связи с веб-сервером
* веб-сервер
  + получает запрос от клиента
  + преобразует в CGI-форму
  + вызывает обработчик
  + конвертирует ответ обработчика из CGI-формы в форму HTTP-ответа клиенту
* скрипты помещают в каталог cgi (или cgi-bin) сервера 
* ранее был одним из наиболее распространённых средств создания динамических сайтов

## FastCGI
* интерфейс
* клиент-серверный протокол взаимодействия веб-сервера и приложения
* развитие технологии CGI
  + более производительный и безопасный по сравнению с CGI
    
## IP
`ip addr show | grep inet| awk '{print $2; }'` my IP  
